import{w as c}from"./with-props-D6P1vN0Z.js";import{p as n,l as e}from"./chunk-D52XG6IA-Crw0zIzM.js";const g=c(function({loaderData:a}){const i=n();function d(r){const t=document.getElementById("default-modal");if(t==null||t.classList.toggle("hidden"),r===-1){const s=document.getElementById("formAgregarLicencia");s==null||s.reset();return}}async function o(r){var s;if(r.preventDefault(),new Date(r.target.fecha.value).toISOString().slice(0,19),new Date().toISOString().slice(0,19),(await fetch("http://localhost:8090/api/v1/licencia/registra",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rucEmpresa:{rucEmpresa:r.target.empresa.value},idUsuario:{idUsuario:r.target.usuario.value},idTipo:{idTipo:r.target.tipo.value}})})).ok){alert("Se ha agregado licencia correctamente"),(s=document.getElementById("formAgregarLicencia"))==null||s.reset();const l=document.getElementById("default-modal");l==null||l.classList.toggle("hidden"),i(0)}else alert("Error al agregar licencia")}return e.jsxs("section",{className:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5",children:[e.jsx("div",{className:"mx-auto max-w-screen-xl px-4 lg:px-12",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsxs("form",{className:"flex items-center",children:[e.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Search"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{"aria-hidden":"true",className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",id:"simple-search",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Search",required:!0})]})]})}),e.jsx("div",{className:"w-full md:w-auto flex flex-col md:flex-row space-y-2 md:space-y-0 items-stretch md:items-center justify-end md:space-x-3 flex-shrink-0",children:e.jsx("button",{onClick:()=>d(0),className:"text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Agregar"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3",children:"NÃºmero"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Empresa"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Usuario"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Tipo"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Fecha Creacion"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Fecha Vencimiento"})]})}),e.jsx("tbody",{children:a.data&&a.data.map((r,t)=>e.jsxs("tr",{className:"border-b dark:border-gray-700",children:[e.jsx("th",{scope:"row",className:"px-4 py-3 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:r.numLicencia}),e.jsx("td",{className:"px-4 py-3",children:r.rucEmpresa.razonSocialEmpresa}),e.jsx("td",{className:"px-4 py-3",children:r.idUsuario.nombreUsuario}),e.jsx("td",{className:"px-4 py-3",children:r.idTipo.descripcionTipo}),e.jsx("td",{className:"px-4 py-3",children:new Date(r.fechaCreacion).toLocaleString()}),e.jsx("td",{className:"px-4 py-3",children:new Date(r.fechaVencimiento).toLocaleString()})]}))})]})})]})}),e.jsx("div",{id:"default-modal",tabIndex:-1,"aria-hidden":"true",className:"hidden overflow-y-auto overflow-x-hidden z-50 justify-center items-center w-full h-full md:inset-0 h-[calc(100%-1rem)]",style:{position:"fixed",padding:"10vh 28vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:e.jsx("div",{className:"relative p-4 w-full max-w-2xl max-h-full",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Agregar Licencia"}),e.jsxs("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"default-modal",onClick:()=>d(-1),children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),e.jsx("div",{className:"mx-auto my-10 h-fit w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700",children:e.jsx("div",{className:"p-6 space-y-4 md:space-y-6 sm:p-8 h-fit",children:e.jsxs("form",{className:"space-y-4 md:space-y-6",method:"POST",id:"formAgregarLicencia",onSubmit:o,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"empresa",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Empresa"}),e.jsxs("select",{id:"empresa",name:"empresa",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{selected:!0,children:"Elegir Empresa"}),a.empresa&&a.empresa.map(r=>e.jsx("option",{value:r.rucEmpresa,children:r.razonSocialEmpresa},r.rucEmpresa))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tipo",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Usuario"}),e.jsxs("select",{id:"usuario",name:"usuario",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{selected:!0,children:"Elegir Usuario"}),a.tipo&&a.usuario.map(r=>e.jsx("option",{value:r.idUsuario,children:r.nombreUsuario},r.idUsuario))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tipo",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Tipo Licencia"}),e.jsxs("select",{id:"tipo",name:"tipo",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{selected:!0,children:"Tipo de Licencia"}),a.tipo&&a.tipo.map(r=>e.jsx("option",{value:r.idTipo,children:r.descripcionTipo},r.idTipo))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fecha",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Fecha de Vencimiento"}),e.jsx("input",{type:"date",name:"fecha",id:"fecha",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:!0})]}),e.jsx("button",{type:"submit",className:"text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 w-full",children:"Registrar Licencia"})]})})})]})})})]})});export{g as default};
