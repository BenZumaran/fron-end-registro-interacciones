import{w as x}from"./with-props-D6P1vN0Z.js";import{r as g,p as h,l as e,q as b}from"./chunk-D52XG6IA-Crw0zIzM.js";const j=x(function({loaderData:a}){const[d,y]=g.useState(a.data),n=h();function i(r){const t=document.getElementById("default-modal");if(t==null||t.classList.toggle("hidden"),r===-1){const c=document.getElementById("formRegistroEmpresa");c==null||c.reset();return}const l=document.getElementById("rucEmpresa");l.value=a.data[r].rucEmpresa;const s=document.getElementById("razonSocial");s.value=a.data[r].razonSocialEmpresa;const u=document.getElementById("suscripcion");u.value=a.data[r].suscripcionEmpresa.numSuscripcion;const o=document.getElementById("activo");a.data[r].estadoEmpresa&&(o.value="1",o.checked=!0);const p=document.getElementById("cantidadLicencias");p.value=a.data[r].cantidadLicenciasEmpresa}async function m(r){var l;if(r.preventDefault(),(await fetch("http://localhost:8090/api/v1/empresa/registra",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rucEmpresa:r.target.rucEmpresa.value,estadoEmpresa:r.target.activo.checked,razonSocialEmpresa:r.target.razonSocial.value,cantidadLicenciasEmpresa:r.target.cantidadLicencias.value,suscripcionEmpresa:{numSuscripcion:r.target.suscripcion.value}})})).ok){alert("Empresa actualizada correctamente"),(l=document.getElementById("formRegistroEmpresa"))==null||l.reset();const s=document.getElementById("default-modal");s==null||s.classList.toggle("hidden"),n(0)}else alert("Error al actualizar la empresa")}return e.jsxs("section",{className:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5",children:[e.jsx("div",{className:"mx-auto max-w-screen-xl px-4 lg:px-12",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsxs("form",{className:"flex items-center",children:[e.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Search"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{"aria-hidden":"true",className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",id:"simple-search",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Search",required:!0})]})]})}),e.jsx("div",{className:"w-full md:w-auto flex flex-col md:flex-row space-y-2 md:space-y-0 items-stretch md:items-center justify-end md:space-x-3 flex-shrink-0",children:e.jsx(b,{to:"/dashboard/mantenimiento/empresas/registro",className:"text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Agregar"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Numero de Ruc"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Razon Social"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Usuarios"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Suscripcion"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Acciones"})]})}),e.jsx("tbody",{children:d&&d.map((r,t)=>e.jsxs("tr",{className:"border-b dark:border-gray-700",children:[e.jsx("th",{scope:"row",className:"px-4 py-3 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:r.rucEmpresa}),e.jsx("td",{className:"px-4 py-3",children:r.razonSocialEmpresa}),e.jsx("td",{className:"px-4 py-3",children:r.usuarios.length}),e.jsx("td",{className:"px-4 py-3",children:r.suscripcionEmpresa.nombreSuscripcion}),e.jsxs("td",{className:"px-4 py-3",children:[r.estadoEmpresa?e.jsx("button",{type:"button",className:"text-white bg-green-700 hover:bg-green-800 focus:outline-none focus:ring-4 focus:ring-green-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800",children:"Activo"}):e.jsx("button",{type:"button",className:"text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",children:"Inactivo"}),e.jsx("button",{type:"button",className:"text-white bg-yellow-400 hover:bg-yellow-500 focus:outline-none focus:ring-4 focus:ring-yellow-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:focus:ring-yellow-900",onClick:()=>i(t),children:"Editar"})]})]},t))})]})})]})}),e.jsx("div",{id:"default-modal",tabIndex:-1,"aria-hidden":"true",className:" hidden overflow-y-auto overflow-x-hidden z-50 justify-center items-center w-full h-full md:inset-0 h-[calc(100%-1rem)]",style:{position:"fixed",padding:"10vh 28vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:e.jsx("div",{className:"relative p-4 w-full max-w-2xl max-h-full",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Editar Empresa"}),e.jsxs("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"default-modal",onClick:()=>i(-1),children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),e.jsx("div",{className:"mx-auto w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700",children:e.jsxs("div",{className:"p-8 space-y-4 md:space-y-6 sm:p-8",children:[e.jsx("h1",{className:"text-xl font-bold text-center leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white",children:"Ingresa una Empresa"}),e.jsxs("form",{className:"space-y-4 md:space-y-6",method:"POST",onSubmit:m,id:"formRegistroEmpresa",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rucEmpresa",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Ruc Empresa"}),e.jsx("input",{type:"number",size:11,name:"rucEmpresa",id:"rucEmpresa",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"20123456789",required:!0})]}),e.jsx("input",{type:"hidden",value:"",name:"cantidadLicencias",id:"cantidadLicencias"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"razonSocial",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"RazÃ³n Social"}),e.jsx("input",{type:"text",name:"razonSocial",id:"razonSocial",placeholder:"Nombre de la Empresa",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"licencia",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Elige una suscripcion"}),e.jsxs("select",{id:"suscripcion",name:"suscripcion",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{selected:!0,children:"Elige una suscripcion"}),a.suscripcion&&a.suscripcion.map(r=>e.jsx("option",{value:r.numSuscripcion,children:r.nombreSuscripcion},r.numSuscripcion))]})]}),e.jsx("div",{children:e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"activo",name:"activo",value:0,className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Activo"})]})}),e.jsx("button",{type:"submit",className:" text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 w-full",children:"Actualizar Empresa"})]})]})})]})})})]})});export{j as default};
