import{w as y}from"./with-props-D6P1vN0Z.js";import{r as k,p as v,l as e,q as w}from"./chunk-D52XG6IA-Crw0zIzM.js";const C=y(function({loaderData:a}){const[n,N]=k.useState(a.data),b=v();function u(r){const t=document.getElementById("default-modal");if(t==null||t.classList.toggle("hidden"),r===-1){const c=document.getElementById("formRegistroUsuario");c==null||c.reset();return}const l=document.getElementById("idUsuario");l.value=a.data[r].idUsuario;const d=document.getElementById("nombre");d.value=a.data[r].nombreUsuario;const m=document.getElementById("correo");m.value=a.data[r].correoUsuario;const i=document.getElementById("fechaNacimiento");i.value=a.data[r].fechaNacimientoUsuario;const g=document.getElementById("telefono");g.value=a.data[r].telefonoUsuario;const s=document.getElementById("clave");s.value=a.data[r].telefonoUsuario;const o=document.getElementById("confirmarClave");o.value=a.data[r].telefonoUsuario;const x=document.getElementById("activo");a.data[r].estadoUsuario&&(x.value="1",x.checked=!0);const p=document.getElementById("sUsu");p.value=a.data[r].saltUsuario;const f=document.getElementById("tipo");f.value=a.data[r].tipoUsuario.idTipo}async function h(r){var s;const t=new Date(r.target.fechaNacimiento.value);let l=t.getDate()<10?"0"+t.getDate():t.getDate(),d=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,i=t.getFullYear()+"-"+d+"-"+l;if(r.preventDefault(),(await fetch("http://localhost:8090/api/v1/usuario/registra",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idUsuario:r.target.idUsuario.value,nombreUsuario:r.target.nombre.value,correoUsuario:r.target.correo.value,claveUsuario:r.target.clave.value,telefonoUsuario:r.target.telefono.value,saltUsuario:r.target.sUsu.value,fechaNacimientoUsuario:i,tipoUsuario:{idTipo:r.target.tipo.value},estadoUsuario:r.target.activo.checked})})).ok){alert("Usuario actualizado correctamente"),(s=document.getElementById("formRegistroUsuario"))==null||s.reset();const o=document.getElementById("default-modal");o==null||o.classList.toggle("hidden"),b(0)}else alert("Error al actualizar usuario")}return e.jsxs("section",{className:"bg-gray-50 dark:bg-gray-900 p-3 sm:p-5",children:[e.jsx("div",{className:"mx-auto max-w-screen-xl px-4 lg:px-12",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsxs("form",{className:"flex items-center",children:[e.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Search"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{"aria-hidden":"true",className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",id:"simple-search",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Search",required:!0})]})]})}),e.jsx("div",{className:"w-full md:w-auto flex flex-col md:flex-row space-y-2 md:space-y-0 items-stretch md:items-center justify-end md:space-x-3 flex-shrink-0",children:e.jsx(w,{to:"/dashboard/mantenimiento/usuarios/registro",className:"text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Agregar"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3",children:"idUsuario"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Nombre Usuario"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Correo Usuario"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Tipo Usuario"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Acciones"})]})}),e.jsx("tbody",{children:n&&n.map((r,t)=>e.jsxs("tr",{className:"border-b dark:border-gray-700",children:[e.jsx("th",{scope:"row",className:"px-4 py-3 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:r.idUsuario}),e.jsx("td",{className:"px-4 py-3",children:r.nombreUsuario}),e.jsx("td",{className:"px-4 py-3",children:r.correoUsuario}),e.jsx("td",{className:"px-4 py-3",children:r.tipoUsuario.descripcionTipo}),e.jsxs("td",{className:"px-4 py-3",children:[r.estadoUsuario===!0?e.jsx("button",{type:"button",className:"text-white bg-green-700 hover:bg-green-800 focus:outline-none focus:ring-4 focus:ring-green-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800",children:"Activo"}):e.jsx("button",{type:"button",className:"text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900",children:"Inactivo"}),e.jsx("button",{type:"button",className:"text-white bg-yellow-400 hover:bg-yellow-500 focus:outline-none focus:ring-4 focus:ring-yellow-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:focus:ring-yellow-900",onClick:()=>u(t),children:"Editar"})]})]}))})]})})]})}),e.jsx("div",{id:"default-modal",tabIndex:-1,"aria-hidden":"true",className:"hidden overflow-y-auto overflow-x-hidden z-50 justify-center items-center w-full h-full md:inset-0 h-[calc(100%-1rem)]",style:{position:"fixed",padding:"10vh 28vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:e.jsx("div",{className:"relative p-4 w-full max-w-2xl max-h-full",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Editar Usuario"}),e.jsxs("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"default-modal",onClick:()=>u(-1),children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),e.jsx("div",{className:"mx-auto my-10 h-fit w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700",children:e.jsxs("div",{className:"p-6 space-y-4 md:space-y-6 sm:p-8 h-fit",children:[e.jsx("h1",{className:"text-xl font-bold text-center leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white",children:"Actualiza Usuario"}),e.jsxs("form",{className:"space-y-4 md:space-y-6",method:"POST",id:"formRegistroUsuario",onSubmit:h,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"idUsuario",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"ID Usuario"}),e.jsx("input",{type:"text",name:"idUsuario",id:"idUsuario",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"TAMAÑO : 6",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nombre",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Nombres del Usuario"}),e.jsx("input",{type:"text",name:"nombre",id:"nombre",placeholder:"Nombre y Apellido genérico",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"correo",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Correo del usuario"}),e.jsx("input",{type:"email",name:"correo",id:"correo",placeholder:"ejemplo@empresa.com.pe",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fechaNacimiento",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Fecha de Nacimiento"}),e.jsx("input",{type:"date",name:"fechaNacimiento",id:"fechaNacimiento",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"telefono",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Telefono del Usuario"}),e.jsx("input",{type:"number",name:"telefono",id:"telefono",placeholder:"987548452",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"clave",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Clave de usuario"}),e.jsx("input",{type:"password",name:"clave",id:"clave",placeholder:"*********",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:!0})]}),e.jsx("input",{type:"hidden",value:"",name:"sUsu",id:"sUsu"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmarClave",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Clave de usuario"}),e.jsx("input",{type:"password",name:"confirmarClave",id:"confirmarClave",placeholder:"*********",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tipo",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Tipo Usuario"}),e.jsxs("select",{id:"tipo",name:"tipo",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{selected:!0,children:"Tipo de Usuario"}),a.tipo&&a.tipo.map(r=>e.jsx("option",{value:r.idTipo,children:r.descripcionTipo},r.idTipo))]})]}),e.jsx("div",{children:e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",id:"activo",name:"activo",value:0,className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Activo"})]})}),e.jsx("button",{type:"submit",className:" text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 w-full",children:"Actualizar Usuario"})]})]})})]})})})]})});export{C as default};
